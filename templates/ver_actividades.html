<!DOCTYPE html>
<html lang="es">

<head>
<meta charset="utf-8" />
<title>plan {{i.id}}</title>
<meta name="plan" content="plan print" />
<meta name="inocA" content="width=device-width, initial-scale=1.0" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
  <body>
    <h2>Actividades Enviadas - Clase {{ session.current_class_id }}</h2>
    {% if actividades %}
      <table border="1">
        <tr>
          <th>ID</th>
          <th>Actividad #</th>
          <th>Estudiante</th>
          <th>Grupo</th>
          <th>PDF</th>
          <th>Fecha</th>
        </tr>
        {% for act in actividades %}
        <tr>
          <td>{{ act.id }}</td>
          <td>{{ act.actividad_num }}</td>
          <td>{{ act.nombres }} {{ act.apellido_paterno }} {{ act.apellido_materno }}</td>
          <td>{{ act.grupo }}</td>
          <td><a href="{{ act.pdf_url }}" target="_blank">Ver PDF</a></td>
          <td>{{ act.created_at }}</td>
        </tr>
        {% endfor %}
      </table>
    {% else %}
      <p>No hay actividades enviadas aún.</p>
    {% endif %}

    {% if user.rol == 'docente' %}
      <form action="{{ url_for('calificar_actividad', actividad_id=act.id) }}" method="POST">
        <input type="number" name="calificacion" min="0" max="10" placeholder="Calificación">
        <textarea name="comentario" placeholder="Comentario"></textarea>
        <button type="submit">Calificar</button>
      </form>
    {% endif %}

    <form method="POST">
      <label>Filtrar por actividad #:</label>
      <input type="number" name="actividad_num">
      <button type="submit">Filtrar</button>
    </form>

  </body>
</html>